{"ast":null,"code":"import{createContext,useState,useEffect}from\"react\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";const AuthContext=/*#__PURE__*/createContext();export const AuthProvider=_ref=>{let{children}=_ref;const[user,setUser]=useState(null);const[token,setToken]=useState(localStorage.getItem(\"token\"));useEffect(()=>{if(token){axios.get(\"http://localhost:5000/profile\",{headers:{Authorization:\"Bearer \".concat(token)}}).then(response=>{setUser(response.data);}).catch(()=>{setUser(null);localStorage.removeItem(\"token\");});}},[token]);const login=async(email,password)=>{try{const response=await axios.post(\"http://localhost:5000/login\",{email,password});setToken(response.data.token);localStorage.setItem(\"token\",response.data.token);return true;}catch(error){var _error$response,_error$response$data;console.error(\"Login failed:\",((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.error)||error.message);return false;}};const logout=()=>{setUser(null);setToken(null);localStorage.removeItem(\"token\");};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:{user,token,login,logout},children:children});};export default AuthContext;","map":{"version":3,"names":["createContext","useState","useEffect","axios","jsx","_jsx","AuthContext","AuthProvider","_ref","children","user","setUser","token","setToken","localStorage","getItem","get","headers","Authorization","concat","then","response","data","catch","removeItem","login","email","password","post","setItem","error","_error$response","_error$response$data","console","message","logout","Provider","value"],"sources":["C:/website_tennis/frontend/src/context/AuthContext.js"],"sourcesContent":["import { createContext, useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nconst AuthContext = createContext();\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n    const [user, setUser] = useState(null);\r\n    const [token, setToken] = useState(localStorage.getItem(\"token\"));\r\n\r\n    useEffect(() => {\r\n        if (token) {\r\n            axios.get(\"http://localhost:5000/profile\", {\r\n                headers: { Authorization: `Bearer ${token}` }\r\n            }).then(response => {\r\n                setUser(response.data);\r\n            }).catch(() => {\r\n                setUser(null);\r\n                localStorage.removeItem(\"token\");\r\n            });\r\n        }\r\n    }, [token]);\r\n\r\n    const login = async (email, password) => {\r\n        try {\r\n            const response = await axios.post(\"http://localhost:5000/login\", { email, password });\r\n            setToken(response.data.token);\r\n            localStorage.setItem(\"token\", response.data.token);\r\n            return true;\r\n        } catch (error) {\r\n            console.error(\"Login failed:\", error.response?.data?.error || error.message);\r\n            return false;\r\n        }\r\n    };\r\n\r\n    const logout = () => {\r\n        setUser(null);\r\n        setToken(null);\r\n        localStorage.removeItem(\"token\");\r\n    };\r\n\r\n    return (\r\n        <AuthContext.Provider value={{ user, token, login, logout }}>\r\n            {children}\r\n        </AuthContext.Provider>\r\n    );\r\n};\r\n\r\nexport default AuthContext;\r\n"],"mappings":"AAAA,OAASA,aAAa,CAAEC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC1D,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE1B,KAAM,CAAAC,WAAW,cAAGN,aAAa,CAAC,CAAC,CAEnC,MAAO,MAAM,CAAAO,YAAY,CAAGC,IAAA,EAAkB,IAAjB,CAAEC,QAAS,CAAC,CAAAD,IAAA,CACrC,KAAM,CAACE,IAAI,CAAEC,OAAO,CAAC,CAAGV,QAAQ,CAAC,IAAI,CAAC,CACtC,KAAM,CAACW,KAAK,CAAEC,QAAQ,CAAC,CAAGZ,QAAQ,CAACa,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAAC,CAEjEb,SAAS,CAAC,IAAM,CACZ,GAAIU,KAAK,CAAE,CACPT,KAAK,CAACa,GAAG,CAAC,+BAA+B,CAAE,CACvCC,OAAO,CAAE,CAAEC,aAAa,WAAAC,MAAA,CAAYP,KAAK,CAAG,CAChD,CAAC,CAAC,CAACQ,IAAI,CAACC,QAAQ,EAAI,CAChBV,OAAO,CAACU,QAAQ,CAACC,IAAI,CAAC,CAC1B,CAAC,CAAC,CAACC,KAAK,CAAC,IAAM,CACXZ,OAAO,CAAC,IAAI,CAAC,CACbG,YAAY,CAACU,UAAU,CAAC,OAAO,CAAC,CACpC,CAAC,CAAC,CACN,CACJ,CAAC,CAAE,CAACZ,KAAK,CAAC,CAAC,CAEX,KAAM,CAAAa,KAAK,CAAG,KAAAA,CAAOC,KAAK,CAAEC,QAAQ,GAAK,CACrC,GAAI,CACA,KAAM,CAAAN,QAAQ,CAAG,KAAM,CAAAlB,KAAK,CAACyB,IAAI,CAAC,6BAA6B,CAAE,CAAEF,KAAK,CAAEC,QAAS,CAAC,CAAC,CACrFd,QAAQ,CAACQ,QAAQ,CAACC,IAAI,CAACV,KAAK,CAAC,CAC7BE,YAAY,CAACe,OAAO,CAAC,OAAO,CAAER,QAAQ,CAACC,IAAI,CAACV,KAAK,CAAC,CAClD,MAAO,KAAI,CACf,CAAE,MAAOkB,KAAK,CAAE,KAAAC,eAAA,CAAAC,oBAAA,CACZC,OAAO,CAACH,KAAK,CAAC,eAAe,CAAE,EAAAC,eAAA,CAAAD,KAAK,CAACT,QAAQ,UAAAU,eAAA,kBAAAC,oBAAA,CAAdD,eAAA,CAAgBT,IAAI,UAAAU,oBAAA,iBAApBA,oBAAA,CAAsBF,KAAK,GAAIA,KAAK,CAACI,OAAO,CAAC,CAC5E,MAAO,MAAK,CAChB,CACJ,CAAC,CAED,KAAM,CAAAC,MAAM,CAAGA,CAAA,GAAM,CACjBxB,OAAO,CAAC,IAAI,CAAC,CACbE,QAAQ,CAAC,IAAI,CAAC,CACdC,YAAY,CAACU,UAAU,CAAC,OAAO,CAAC,CACpC,CAAC,CAED,mBACInB,IAAA,CAACC,WAAW,CAAC8B,QAAQ,EAACC,KAAK,CAAE,CAAE3B,IAAI,CAAEE,KAAK,CAAEa,KAAK,CAAEU,MAAO,CAAE,CAAA1B,QAAA,CACvDA,QAAQ,CACS,CAAC,CAE/B,CAAC,CAED,cAAe,CAAAH,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}